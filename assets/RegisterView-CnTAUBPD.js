import{g as e,a,b as t,h as l,i as s,j as r,k as o,l as d,m as i,t as n,w as v,n as u,v as c,p as x,q as b,s as p,x as m,r as h,u as f,o as g}from"./vue-vendor-DH3SoYu2.js";import{u as w}from"./index-BoJqhDv6.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./supabase-DJmvsvGB.js";const k={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 px-4 py-8"},z={class:"max-w-md w-full"},j={class:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20"},C={key:0,class:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-xl shadow-sm animate-shake"},M={class:"flex items-start"},_={class:"flex-1"},B={class:"text-sm text-red-700 mt-1"},L={class:"relative"},V=["disabled"],I=["disabled"],H={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},q={key:1},A={key:2},D={class:"mt-8 text-center"},N={class:"text-sm text-gray-600"},R={key:1,class:"mt-6 text-center"},F={key:0,class:"mt-6 p-5 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-xl shadow-lg"},K=y(e({__name:"RegisterView",setup(e){const y=s(),K=f(),{register:P,isLoading:Q}=w(),S=a(""),T=a(""),U=a(null),E=t(()=>void 0!==window.PublicKeyCredential);async function G(){if(T.value)if(S.value.trim()){U.value=null;try{await P(T.value,S.value.trim()),K.push("/dashboard")}catch(e){U.value=e.message||"Ошибка регистрации"}}else U.value="Пожалуйста, введите ваше имя";else U.value="Отсутствует invite токен"}return l(()=>{const e=y.query.invite;e?T.value=e:U.value="Invite токен не найден. Попросите администратора создать новый QR-код.",E.value||(U.value="Ваше устройство не поддерживает биометрическую аутентификацию.")}),(e,a)=>{const t=h("router-link");return g(),r("div",k,[o("div",z,[o("div",j,[a[10]||(a[10]=i('<div class="text-center mb-8" data-v-54a012b8><div class="mx-auto w-20 h-20 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg transform hover:scale-105 transition-transform duration-300" data-v-54a012b8><svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-54a012b8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-54a012b8></path></svg></div><h2 class="text-4xl font-extrabold text-gray-900 mb-2" data-v-54a012b8>Регистрация</h2><p class="text-gray-600 text-lg" data-v-54a012b8>Создайте аккаунт с биометрией</p></div>',1)),U.value?(g(),r("div",C,[o("div",M,[a[2]||(a[2]=o("svg",{class:"w-6 h-6 text-red-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),o("div",_,[a[1]||(a[1]=o("h3",{class:"text-sm font-bold text-red-800"},"Ошибка",-1)),o("p",B,n(U.value),1)])])])):d("",!0),o("form",{onSubmit:v(G,["prevent"]),class:"space-y-6"},[o("div",null,[a[4]||(a[4]=o("label",{for:"displayName",class:"block text-sm font-semibold text-gray-700 mb-2"}," Ваше имя ",-1)),o("div",L,[u(o("input",{id:"displayName","onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),type:"text",required:"",placeholder:"Введите ваше имя",class:"w-full px-4 py-4 pr-10 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-200 text-gray-900 placeholder-gray-400 hover:border-gray-300",disabled:x(Q)},null,8,V),[[c,S.value]]),a[3]||(a[3]=o("svg",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1))])]),a[6]||(a[6]=i('<div class="bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5 shadow-sm" data-v-54a012b8><div class="flex items-start" data-v-54a012b8><div class="flex-shrink-0" data-v-54a012b8><svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20" data-v-54a012b8><path d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2H7V7a3 3 0 015.905-.75 1 1 0 001.937-.5A5.002 5.002 0 0010 2z" data-v-54a012b8></path></svg></div><div class="ml-4 flex-1" data-v-54a012b8><h4 class="text-sm font-bold text-blue-900 mb-1" data-v-54a012b8>Биометрическая защита</h4><p class="text-sm text-blue-800 leading-relaxed" data-v-54a012b8> Для входа будет использоваться Face ID, Touch ID или пин-код вашего устройства </p></div></div></div>',1)),o("button",{type:"submit",disabled:x(Q)||!S.value,class:"w-full py-4 px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0"},[x(Q)?(g(),r("svg",H,[...a[5]||(a[5]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):d("",!0),x(Q)?(g(),r("span",A,"Регистрация...")):(g(),r("span",q,"Зарегистрироваться"))],8,I)],32),o("div",D,[o("p",N,[a[8]||(a[8]=b(" Уже есть аккаунт? ",-1)),p(t,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-bold hover:underline transition-all"},{default:m(()=>[...a[7]||(a[7]=[b(" Войти ",-1)])]),_:1})])]),T.value?(g(),r("div",R,[...a[9]||(a[9]=[o("div",{class:"inline-flex items-center px-4 py-2 bg-green-50 border border-green-200 rounded-full"},[o("svg",{class:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),o("span",{class:"text-xs font-semibold text-green-700"},"Invite код обнаружен")],-1)])])):d("",!0)]),E.value?d("",!0):(g(),r("div",F,[...a[11]||(a[11]=[o("div",{class:"flex items-center"},[o("svg",{class:"w-6 h-6 text-yellow-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[o("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),o("p",{class:"text-sm font-semibold text-yellow-800"}," Ваше устройство не поддерживает биометрическую аутентификацию ")],-1)])]))])])}}}),[["__scopeId","data-v-54a012b8"]]);export{K as default};
