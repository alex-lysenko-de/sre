import{g as e,a,b as t,h as s,i as l,j as r,k as d,l as i,m as o,t as n,w as c,n as u,v,p as m,q as b,s as x,x as p,r as g,u as f,o as h}from"./vue-vendor-DH3SoYu2.js";import{u as y}from"./index-DnSONjdv.js";import{_ as w}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./supabase-DJmvsvGB.js";const k={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4"},j={class:"max-w-md w-full"},z={class:"bg-white rounded-2xl shadow-xl p-8"},_={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},C={class:"flex items-start"},M={class:"flex-1"},I={class:"text-sm text-red-700 mt-1"},L=["disabled"],B=["disabled"],V={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},q={key:1},H={key:2},D={class:"mt-6 text-center"},N={class:"text-sm text-gray-600"},R={key:1,class:"mt-4 text-center"},A={key:0,class:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},F=w(e({__name:"RegisterView",setup(e){const w=l(),F=f(),{register:K,isLoading:P}=y(),Q=a(""),S=a(""),T=a(null),U=t(()=>void 0!==window.PublicKeyCredential);async function E(){if(S.value)if(Q.value.trim()){T.value=null;try{await K(S.value,Q.value.trim()),F.push("/dashboard")}catch(e){T.value=e.message||"Ошибка регистрации"}}else T.value="Пожалуйста, введите ваше имя";else T.value="Отсутствует invite токен"}return s(()=>{const e=w.query.invite;e?S.value=e:T.value="Invite токен не найден. Попросите администратора создать новый QR-код.",U.value||(T.value="Ваше устройство не поддерживает биометрическую аутентификацию.")}),(e,a)=>{const t=g("router-link");return h(),r("div",k,[d("div",j,[d("div",z,[a[9]||(a[9]=o('<div class="text-center mb-8" data-v-0a300c3b><div class="mx-auto w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mb-4" data-v-0a300c3b><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0a300c3b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-0a300c3b></path></svg></div><h2 class="text-3xl font-bold text-gray-900" data-v-0a300c3b>Регистрация</h2><p class="text-gray-600 mt-2" data-v-0a300c3b>Создайте аккаунт с биометрией</p></div>',1)),T.value?(h(),r("div",_,[d("div",C,[a[2]||(a[2]=d("svg",{class:"w-5 h-5 text-red-600 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),d("div",M,[a[1]||(a[1]=d("h3",{class:"text-sm font-medium text-red-800"},"Ошибка",-1)),d("p",I,n(T.value),1)])])])):i("",!0),d("form",{onSubmit:c(E,["prevent"]),class:"space-y-6"},[d("div",null,[a[3]||(a[3]=d("label",{for:"displayName",class:"block text-sm font-medium text-gray-700 mb-2"}," Ваше имя ",-1)),u(d("input",{id:"displayName","onUpdate:modelValue":a[0]||(a[0]=e=>Q.value=e),type:"text",required:"",placeholder:"Введите ваше имя",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition",disabled:m(P)},null,8,L),[[v,Q.value]])]),a[5]||(a[5]=o('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4" data-v-0a300c3b><div class="flex items-start" data-v-0a300c3b><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3" fill="currentColor" viewBox="0 0 20 20" data-v-0a300c3b><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-0a300c3b></path></svg><div class="flex-1" data-v-0a300c3b><h4 class="text-sm font-medium text-blue-900" data-v-0a300c3b>Биометрическая защита</h4><p class="text-sm text-blue-800 mt-1" data-v-0a300c3b> Для входа будет использоваться Face ID, Touch ID или пин-код вашего устройства </p></div></div></div>',1)),d("button",{type:"submit",disabled:m(P)||!Q.value,class:"w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[m(P)?(h(),r("svg",V,[...a[4]||(a[4]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):i("",!0),m(P)?(h(),r("span",H,"Регистрация...")):(h(),r("span",q,"Зарегистрироваться"))],8,B)],32),d("div",D,[d("p",N,[a[7]||(a[7]=b(" Уже есть аккаунт? ",-1)),x(t,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-medium"},{default:p(()=>[...a[6]||(a[6]=[b(" Войти ",-1)])]),_:1})])]),S.value?(h(),r("div",R,[...a[8]||(a[8]=[d("p",{class:"text-xs text-gray-500"}," Invite код обнаружен ✓ ",-1)])])):i("",!0)]),U.value?i("",!0):(h(),r("div",A,[...a[10]||(a[10]=[d("p",{class:"text-sm text-yellow-800 text-center"}," ⚠️ Ваше устройство не поддерживает биометрическую аутентификацию ",-1)])]))])])}}}),[["__scopeId","data-v-0a300c3b"]]);export{F as default};
