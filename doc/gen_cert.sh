#!/bin/bash
# generate-certs.sh
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è self-signed SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è localhost

echo "üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è localhost..."

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
mkdir -p cert

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl req -x509 -newkey rsa:4096 -sha256 -days 365 -nodes \
  -keyout cert/localhost-key.pem \
  -out cert/localhost.pem \
  -subj "/CN=localhost" \
  -addext "subjectAltName=DNS:localhost,DNS:*.localhost,IP:127.0.0.1"

echo "‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ø–∞–ø–∫–µ cert/"
echo ""
echo "–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:"
echo "1. –£—Å—Ç–∞–Ω–æ–≤–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ —Å–∏—Å—Ç–µ–º—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo "2. –ó–∞–ø—É—Å—Ç–∏: npm run dev"
echo "3. –û—Ç–∫—Ä–æ–π: https://localhost:3000"
echo "4. –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ - –Ω–∞–∂–º–∏ '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å' (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è dev)"
echo ""
echo "‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ production!"