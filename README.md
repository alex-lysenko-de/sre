---

# üß≠ Vue + Supabase PWA Config App

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (PWA)**, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –Ω–∞ **Vue 3 + Vite**, –∫–æ—Ç–æ—Ä–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö **Supabase**.
–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞—Å—Ç—Ä–æ–µ–∫), –∫–æ—Ç–æ—Ä—ã–µ:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ **WebSocket (Supabase Realtime)**,
* –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ (–≥–æ—Å—Ç–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã),
* –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏,
* –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∏ —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ‚Äú–µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏‚Äù ‚Äî –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `config`, –∞ –∫–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üì° **Realtime-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase Realtime (Postgres changes feed).
* üîí **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞** —á–µ—Ä–µ–∑ `access_level` –∏ JWT-–ø–æ–ª–∏—Ç–∏–∫—É Supabase.
* üß† **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö –≤ `localStorage` —Å TTL 5 –º–∏–Ω—É—Ç.
* üß± **–û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `config`** –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–∏—Ü –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫.
* üë§ **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (guest / user / admin).
* üìû –°—Ç—Ä–∞–Ω–∏—Ü–∞ `Info` –¥–ª—è –≤—Å–µ—Ö (–≥–æ—Å—Ç–µ–π –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ) ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–µ—Ñ–æ–Ω).
* ‚öôÔ∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ `Config` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤; –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
* üöÄ **PWA**: –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Service Worker.
* üîÅ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ ‚Äî PWA –≤—Å–µ–≥–¥–∞ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é.

---

## üß∞ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è / –±–∏–±–ª–∏–æ—Ç–µ–∫–∞                     |
| --------------- | ------------------------------------------- |
| Frontend        | **Vue 3 (Composition API)**                 |
| Routing         | **vue-router 4**                            |
| –°–±–æ—Ä–∫–∞          | **Vite 7**                                  |
| PWA             | **vite-plugin-pwa**                         |
| Backend         | **Supabase (PostgreSQL + Realtime + Auth)** |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è     | **Supabase Auth (JWT, user_metadata.role)** |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | **Supabase Table `config`**                 |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ     | **localStorage + TTL**                      |
| UI              | Tailwind CSS (utility-first –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ)     |

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ main.js                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ supabase.js             # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ Supabase
‚îú‚îÄ‚îÄ router/
‚îÇ   ‚îî‚îÄ‚îÄ index.js            # –ú–∞—Ä—à—Ä—É—Ç—ã –∏ guards (admin access)
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ config.js           # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (Supabase + Realtime + Cache)
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îú‚îÄ‚îÄ InfoView.vue        # –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º –∏ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ ConfigView.vue      # –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π config
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ UsersList.vue       # –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (—á–∏—Ç–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îî‚îÄ‚îÄ assets/                 # –ú–µ–¥–∏–∞ –∏ —Å—Ç–∏–ª–∏
```

---

## üß© –¢–∞–±–ª–∏—Ü–∞ –≤ Supabase: `config`

| key                   | value         | description              | updated_at  | access_level |
| --------------------- | ------------- | ------------------------ | ----------- | ------------ |
| `base_url`            | `https://‚Ä¶`   | –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è App      | `timestamp` | 1            |
| `public_phone_number` | `+4912345678` | –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –≤—Å–µ—Ö         | `timestamp` | 3            |
| `total_buses`         | `3`           | –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `timestamp` | 2            |
| `total_groups`        | `14`          | –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `timestamp` | 2            |
| `year`                | `2025`        | –ü—É–±–ª–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ       | `timestamp` | 3            |

---

## üîê –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (RLS)

**Row Level Security (RLS)** –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `config` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä–∫—É –ø–æ `access_level`:

* –ì–æ—Å—Ç–∏ (`anonymous`) ‚Üí —Ç–æ–ª—å–∫–æ `access_level = 3`
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`authenticated`) ‚Üí `access_level >= 2`
* –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (`user_metadata.role = 'admin'`) ‚Üí –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (select / update / insert / delete)

---

## üåê –ú–∞—Ä—à—Ä—É—Ç—ã

| URL       | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | –î–æ—Å—Ç—É–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                |
| --------- | ---------------- | --------------------- | --------------------------------------- |
| `/info`   | `InfoView.vue`   | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏      | –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω              |
| `/config` | `ConfigView.vue` | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏  |
| `/users`  | `UsersList.vue`  | –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ        | –ü—Ä–∏–º–µ—Ä —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Users` |

---

## ‚ö° PWA

* –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `vite-plugin-pwa`
* `registerType: 'autoUpdate'`
* –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `updateSW(true)`
* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–π –±–∏–ª–¥ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

## üß† –ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–∑–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `config` ‚Üí
2. Supabase –ø–æ—Å—ã–ª–∞–µ—Ç **postgres_changes** —á–µ—Ä–µ–∑ WebSocket ‚Üí
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Üí
4. –ú–æ–¥—É–ª—å `config.js` –≤—ã–∑—ã–≤–∞–µ—Ç `fetchFromSupabase()` ‚Üí
5. –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `useConfig()`, **—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ üí•
